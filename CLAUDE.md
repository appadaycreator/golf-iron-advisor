# プロジェクト概要
このプロジェクトは、**ゴルフアイアン適性診断システム**の開発・運用を目的としています。ユーザーの身体特性、技術レベル、スイング特性を総合的に分析し、最適なゴルフアイアンを科学的に推奨するWebアプリケーションです。

主要技術スタック: HTML5, CSS3, JavaScript (ES6+), TailwindCSS, Chart.js, PWA, GitHub Pages

開発チームは、ユーザビリティ、パフォーマンス、そして保守性の高いコードを重視しています。

## 主要機能
- 7つの質問による適性診断
- 100種類のクラブデータベース
- 科学的根拠に基づく推奨アルゴリズム
- 診断結果の保存・共有機能
- 多言語対応（日本語・英語）
- レスポンシブデザイン

# 開発ワークフロー
すべての機能実装および修正は、以下のワークフローに従って実行すること。

## 1. ソースコードの最新化
* 作業開始前に必ず `git pull` を実行し、コードベースを最新の状態にすること。

## 2. 変更の実装と自己検証
* 「**最適で完全な形**」でコードを修正し、関連する全てのファイルに一貫性を持たせること。
* **変更による横展開（サイドエフェクト）が必要ないか**、コードベース全体を綿密にチェックすること。
* ローカル環境で以下のテストを**自動的に実施**し、**自己検証**を徹底すること：
  * 機能テスト: 新機能が意図通りに動作することを確認
  * 退行テスト: 既存機能が変更によって壊れていないことを確認
  * コンソールエラーチェック: ブラウザコンソールにエラーが出ないことを確認
  * レスポンシブテスト: モバイル・タブレット・デスクトップで正常表示を確認
* プロジェクトのリポジトリ管理が不要なファイル（例: .DS_Store、node_modules、一時ファイルなど）は、**`.gitignore`に適切に追加**し、コミットされないようにすること。

## 3. ドキュメントの更新
* 新機能を実装した場合、必ず**`function.html`を更新**し、機能の概要と使用方法を明記すること。
* 変更内容が**`README.md`または`SPEC.md`に記載すべき場合**は、これらのドキュメントも併せて更新し、常に最新の状態を保つこと。
* 重要な変更は`CLAUDE.md`自体も更新すること。

## 4. コミットとプッシュ（自動承認）
* **私に確認することなく**、すべての変更が上記ガイドラインを満たしていることを確認した後、**自動的に`git add`, `git commit`, `git push`を実行すること**。
* コミットメッセージは、変更内容を明確に要約し、必要に応じて変更の背景も簡潔に記述すること。
* コミットメッセージには🤖マークとClaude Codeの署名を含めること。

## 5. デプロイ後のテスト（自動検証）
* `git push`完了後、**GitHub Pages上のWebアプリケーション**に対する動作テストを自動で実行し、本番環境でコンソールエラーが出ない状態であることを確認すること。
* WebFetchツールやcurlコマンドを使用して、主要なファイルが正しくアクセス可能であることを確認すること。

# コーディング規約
* **インデント**: スペース4つを使用
* **セミコロン**: JavaScriptでは必須
* **命名規則**:
  * 変数・関数: camelCase（例: `diagnosisData`, `calculateResults`）
  * 定数: UPPER_SNAKE_CASE（例: `MAX_CLUBS`）
  * CSSクラス: kebab-case（例: `quiz-option`, `btn-primary`）
* **コメント**: 
  * 複雑なロジックには必ずコメントを追加
  * ただし、ユーザーから特に指定がない限り、過度なコメントは避ける
* **エラーハンドリング**: try-catchブロックを適切に使用し、ユーザーフレンドリーなエラーメッセージを表示
* **パフォーマンス**: 
  * 画像は適切に最適化
  * JavaScriptは必要最小限に
  * 非同期処理を活用

# ツール定義
Claude Codeは、以下のツールとコマンドを利用できる。
* `git`: バージョン管理操作（add, commit, push, pull, status, diff, log）
* `python3 -m http.server`: ローカルWebサーバーの起動
* `curl`: HTTPリクエストの送信、APIテスト
* `pkill`: プロセスの終了
* `python3`, `pip3`: Pythonスクリプトの実行（画像生成など）
* `grep`, `sed`, `find`, `ls`: ファイルシステム操作および検索
* `magick` (ImageMagick): 画像処理（favicon作成など）
* `cp`: ファイルのコピー
* 各種エディタツール: Read, Write, Edit, MultiEdit

## プロジェクト固有のコマンド
* `python3 -m http.server 8000`: ローカルサーバー起動（ポート8000）
* `curl -s http://localhost:8000/`: ローカルテスト
* `curl -s https://appadaycreator.github.io/golf-iron-advisor/`: 本番環境テスト

# 重要な注意事項
* **GitHub Pages**: このプロジェクトはGitHub Pagesでホスティングされているため、静的ファイルのみ使用可能
* **パス**: すべてのリソースパスは相対パス（`./`）を使用すること
* **キャッシュ**: Service Workerを使用しているため、更新後はキャッシュのクリアが必要な場合がある
* **ブラウザ互換性**: モダンブラウザ（Chrome, Firefox, Safari, Edge）での動作を保証
* **レスポンシブ**: モバイルファーストで設計し、すべてのデバイスで快適に使用できること

# プロジェクト構造
```
golf-iron-advisor/
├── index.html          # メインアプリケーション
├── lp.html            # ランディングページ
├── function.html      # 機能仕様書
├── CLAUDE.md          # Claude Code用ガイドライン（このファイル）
├── README.md          # プロジェクト説明
├── manifest.json      # PWAマニフェスト
├── sw.js             # Service Worker
├── favicon.ico       # ファビコン
├── icons/            # アイコンファイル
├── assets/           # 静的リソース
│   ├── css/         # スタイルシート
│   ├── js/          # JavaScriptファイル
│   └── images/      # 画像ファイル
└── tests/           # テストファイル
```

# 更新履歴
- 2025年1月: 初版作成・リファクタリング実施・バグ修正
  - Enterキーナビゲーション機能追加
  - クラブデータベースを100種類に拡張
  - アイアンクラブ一覧ページ新設
  - コードリファクタリング実施（モジュール化・分離）
  - AI開発対応アーキテクチャ導入
  - 自動テストスイート導入
  - **診断履歴登録機能修正** - showResults内でsaveToHistory呼び出し追加
  - **ゴルファータイプ別プロゴルファー表示機能追加** - 各タイプに対応するプロゴルファー名表示
  - **実際の商品画像表示機能実装** - SVGプレースホルダーをUnsplash高品質画像に置換
  - 画像エラーハンドリング機能追加（onerror属性によるフォールバック）
  - 基本情報数値入力問題修正（step・inputmode属性追加）
  - ClubDataService JSON読み込み・フォールバック機能修正
  - エラーハンドリング強化・ログ出力改善
  - コンソールエラーの完全解消